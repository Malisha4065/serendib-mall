syntax = "proto3";

package inventory.v1;

option java_multiple_files = true;
option java_package = "com.serendibmall.inventory.v1";
option java_outer_classname = "InventoryProto";

service InventoryService {
  // Check stock for a specific product
  rpc GetStock (GetStockRequest) returns (StockResponse);
  
  // Batch check stock for multiple products (useful for cart/checkout)
  rpc GetBatchStock (GetBatchStockRequest) returns (BatchStockResponse);

  // Set absolute stock level for a product (admin)
  rpc SetStock (SetStockRequest) returns (StockResponse);

  // Adjust stock by delta, e.g. +50 restock or -10 correction (admin)
  rpc UpdateStock (UpdateStockRequest) returns (StockResponse);

  // List all inventory entries (admin, paginated)
  rpc ListInventory (ListInventoryRequest) returns (ListInventoryResponse);
}

message GetStockRequest {
  string product_id = 1;
}

message StockResponse {
  string product_id = 1;
  int32 quantity = 2;
  bool is_available = 3;
}

message GetBatchStockRequest {
  repeated string product_ids = 1;
}

message BatchStockResponse {
  repeated StockResponse stocks = 1;
}

message SetStockRequest {
  string product_id = 1;
  int32 quantity = 2;
}

message UpdateStockRequest {
  string product_id = 1;
  int32 delta = 2;
}

message ListInventoryRequest {
  int32 page = 1;
  int32 size = 2;
}

message ListInventoryResponse {
  repeated StockResponse items = 1;
  int32 total_count = 2;
}
